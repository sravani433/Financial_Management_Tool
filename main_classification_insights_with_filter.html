<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Insights Dashboard</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --primary-50:#f8fafc;--primary-100:#f1f5f9;--primary-200:#e2e8f0;
            --primary-300:#cbd5e1;--primary-400:#94a3b8;--primary-500:#64748b;
            --primary-600:#475569;--primary-700:#334155;--primary-800:#1e293b;
            --primary-900:#0f172a;

            --accent-blue:#3b82f6;--accent-blue-light:#60a5fa;
            --accent-green:#10b981;--accent-amber:#f59e0b;
            --accent-red:#ef4444;--accent-purple:#8b5cf6;

            --surface-0:#ffffff;--surface-1:#f8fafc;
            --surface-2:#f1f5f9;--surface-3:#e2e8f0;

            --text-primary:#0f172a;--text-secondary:#475569;--text-tertiary:#64748b;
            --border-light:#e2e8f0;--border-medium:#cbd5e1;

            --shadow-md:0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg:0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        *{box-sizing:border-box;margin:0;padding:0}
        body{
            font-family:Inter,system-ui,sans-serif;
            background:var(--surface-1);
            padding:20px;
            color:var(--text-primary);
        }

        .dashboard{max-width:1400px;margin:auto}

        .header{
            background:var(--surface-0);
            border-radius:16px;
            padding:32px;
            box-shadow:var(--shadow-md);
            margin-bottom:24px;
            border-top:4px solid var(--accent-blue);
        }

        .header h1{font-size:26px;font-weight:700}
        .header p{color:var(--text-secondary);margin-top:8px}

        .controls-section{
            background:var(--surface-0);
            padding:32px;
            border-radius:16px;
            box-shadow:var(--shadow-md);
            margin-bottom:24px;
        }

        .section-header{
            display:flex;
            justify-content:space-between;
            align-items:center;
            margin-bottom:24px;
            border-bottom:1px solid var(--border-light);
            padding-bottom:16px;
        }

        .section-title{
            font-size:18px;
            font-weight:600;
            display:flex;
            gap:10px;
            align-items:center;
        }

        .btn{
            padding:10px 16px;
            border-radius:8px;
            border:1px solid var(--border-medium);
            background:var(--surface-0);
            cursor:pointer;
            display:flex;
            gap:8px;
            align-items:center;
            font-weight:500;
        }

        .btn-primary{
            background:var(--accent-blue);
            color:#fff;
            border-color:var(--accent-blue);
        }

        .btn:hover{box-shadow:var(--shadow-lg)}

        .search-filter-bar{
            display:flex;
            gap:16px;
            flex-wrap:wrap;
            margin-bottom:24px;
        }

        .filter-dropdown{
            padding:12px 16px;
            border-radius:8px;
            border:1px solid var(--border-medium);
            background:var(--surface-0);
            min-width:200px;
        }

        .classification-group{
            background:var(--surface-1);
            padding:20px;
            border-radius:12px;
            border:1px solid var(--border-light);
            margin-bottom:24px;
        }

        .classification-label{
            font-weight:600;
            margin-bottom:16px;
            display:flex;
            gap:8px;
            align-items:center;
        }

        .filter-info{
            display:flex;
            gap:12px;
            align-items:center;
            background:rgba(59,130,246,.08);
            border:1px solid rgba(59,130,246,.2);
            padding:14px 18px;
            border-radius:12px;
            margin-top:16px;
        }

        .category-selector{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
            gap:16px;
        }

        .category-card{
            background:#fff;
            padding:20px;
            border-radius:12px;
            border:2px solid var(--border-light);
            cursor:pointer;
        }

        .category-card.selected{
            border-color:var(--accent-blue);
            background:rgba(59,130,246,.05);
        }

        .no-selection{
            background:#fff;
            border:2px dashed var(--border-medium);
            border-radius:16px;
            padding:60px;
            text-align:center;
        }
    </style>
</head>

<body>
<div class="dashboard">

    <div class="header">
        <h1><i class="fas fa-chart-line"></i> Financial Insights Dashboard</h1>
        <p>Run AI-powered financial insights as controlled background executions</p>
    </div>

    <div class="controls-section">
        <div class="section-header">
            <div class="section-title">
                <i class="fas fa-sliders-h"></i> Insight Controls
            </div>
        </div>

        <!-- üîπ Insight Execution Panel -->
        <div class="classification-group">
            <div class="classification-label">
                <i class="fas fa-rocket"></i> Insight Execution Control
            </div>

            <div class="search-filter-bar">
                <select class="filter-dropdown" id="classificationType">
                    <option value="MAIN_CLASSIFICATION">Main Classification</option>
                    <option value="SUB_CLASSIFICATION">Sub Classification</option>
                </select>

                <select class="filter-dropdown" id="insightType">
                    <option value="INCOME">Income</option>
                    <option value="INVESTMENT">Investment</option>
                    <option value="EXPENDITURE">Expenditure</option>
                    <option value="ASSET">Asset</option>
                    <option value="INTERNAL">Internal</option>
                    <option value="HEADLEVEL">Head Level</option>
                </select>

                <button class="btn btn-primary" onclick="runInsightJob()">
                    <i class="fas fa-play"></i> Run Insight
                </button>
            </div>

            <div class="filter-info" id="executionStatus" style="display:none;">
                <i class="fas fa-clock"></i>
                <span id="executionText"></span>
            </div>
        </div>

        <!-- Category Selection -->
        <div class="category-selector">
            <div class="category-card" onclick="toggleCategory('Income')">üí∞ Income</div>
            <div class="category-card" onclick="toggleCategory('Investment')">üìà Investment</div>
            <div class="category-card" onclick="toggleCategory('Assets')">üè¶ Assets</div>
            <div class="category-card" onclick="toggleCategory('Liabilities')">üí≥ Liabilities</div>
        </div>
    </div>

    <div class="no-selection">
        <h3>No Insights Executed</h3>
        <p>Select parameters and run an insight job</p>
    </div>

</div>

<script>
    let selectedCategories = [];

    function toggleCategory(cat){
        const idx = selectedCategories.indexOf(cat);
        if(idx > -1){ selectedCategories.splice(idx,1); }
        else{ selectedCategories.push(cat); }
        document.querySelectorAll('.category-card').forEach(c=>{
            c.classList.toggle('selected', selectedCategories.includes(c.innerText.trim()));
        });
    }

    function runInsightJob(){
        if(selectedCategories.length === 0){
            alert("Select at least one category");
            return;
        }

        const payload = {
            classification_type: document.getElementById("classificationType").value,
            insight_type: document.getElementById("insightType").value,
            categories: selectedCategories,
            triggered_at: new Date().toISOString()
        };

        console.log("üöÄ Insight Job Payload:", payload);

        const status = document.getElementById("executionStatus");
        const text = document.getElementById("executionText");

        status.style.display = "flex";
        text.innerText = "Insight job queued and running in background‚Ä¶";

        setTimeout(()=>{
            text.innerText = "Insight execution completed successfully.";
        },2000);
    }
</script>

</body>
</html>
